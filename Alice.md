# 开发日记：2021新年前瞻  
Hello大家好~新的一年，不知道大家过得怎么样？许下新年愿望了吗？准备好新的一年里要做什么了吗？

什么？你只想变成一条咸鱼？没有任何规划？好吧，不论你有没有规划，亚璃子的开发都需要一个规划。

到年初时，就是公布秘密的时候。亚璃子开发工作的未来，就一起来看看吧~
***
## 1.大重构
>一切都需要一次彻底打破与重组

很遗憾，由于用户的数量巨大，亚璃子的读/写配置的方式的偶发错误已经成为了一个不可忽视的问题。虽然发生错误的概率极低，但是在每天发送4000+条消息的巨大操作量下，这一问题正在变得越来越频繁。所以，对数据存储方式的一次**大革新**是必要的。

_（注：亚璃子的后台数据是以“配置文件”的形式保存在服务器的文件夹里的。配置文件的实质是一个文本文档，读/写配置实际上是对配置文件中的数据进行读/写。这种操作有极低的概率出现问题，目前的好感度清零问题属于此类。）_

未来，亚璃子将会抛弃配置文件，而转用**SQL数据库**进行数据的存储。

SQL数据库的存储方式相对配置文件来讲显然是更优越的。它拥有更快的数据读写速度，更灵活的数据结构，还可以实现表之间的快速查询，可以实现大量通过配置文件无法实现的功能。

数据库的存储方式类似于表格，例如好感度和pt点就可以这样存储:
|    QQ号    | 好感度 | pt点  |
| :--------: | :----: | :---: |
| 1122334455 | 114514 | 1919  |
| 6677889910 |  810   |   0   |

当然，数据库的缺点就是过于复杂，以至于需要学习专门的一种查询语言去操作它。例如如果想要从上表查询一个QQ号的好感度，需要这样写：  
```sql
SELECT QQ号,好感度 FROM personal 
WHERE QQ号=1122334455;
```

结果为：
|    QQ号    | 好感度 |
| :--------: | :----: |
| 1122334455 | 114514 |

另外，修改数据的存储方式需要重写**所有**的代码，这显然极度费时费力，并不是一种高效的选择。但对于我来说，这是一个绝好的学习机会，也会让我在计算机这条路上越走越远。毕竟，技多不压身嘛φ(>ω<*) 

大重构需要极长的一段时间，毕竟几千行代码的工作量不是一个人短时间可以应付过来的。开发者团队？不存在的，从始至终，一直只有我一个人而已。

## 2.冒险模式
>我要带上最好的剑，翻过最高的山

只有PVP模式

