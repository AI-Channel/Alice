# 开发日记：2021新年前瞻  
Hello大家好~新的一年，不知道大家过得怎么样？许下新年愿望了吗？准备好新的一年里要做什么了吗？

什么？你只想变成一条咸鱼？没有任何规划？好吧，不论你有没有规划，亚璃子的开发都需要一个规划。

到年初时，就是公布秘密的时候。亚璃子开发工作的未来，就一起来看看吧~
***
## 1.大重构
>一切都需要一次彻底打破与重组

很遗憾，由于用户的数量巨大，亚璃子的读/写配置的方式的偶发错误已经成为了一个不可忽视的问题。虽然发生错误的概率极低，但是在每天发送4000+条消息的巨大操作量下，这一问题正在变得越来越频繁。所以，对数据存储方式的一次**大革新**是必要的。

_（注：亚璃子的后台数据是以“配置文件”的形式保存在服务器的文件夹里的。配置文件的实质是一个文本文档，读/写配置实际上是对配置文件中的数据进行读/写。这种操作有极低的概率出现问题，目前的好感度清零问题属于此类。）_

未来，亚璃子将会抛弃配置文件，而转用**SQL数据库**进行数据的存储。

SQL数据库的存储方式相对配置文件来讲显然是更优越的。它拥有更快的数据读写速度，更灵活的数据结构，还可以实现表之间的快速查询，可以实现大量通过配置文件无法实现的功能。

数据库的存储方式类似于表格，例如好感度和pt点就可以这样存储:
|    QQ号    | 好感度 | pt点  |
| :--------: | :----: | :---: |
| 1122334455 | 114514 | 1919  |
| 6677889910 |  810   |   0   |

当然，数据库的缺点就是过于复杂，以至于需要学习专门的一种查询语言去操作它。例如如果想要从上表查询一个QQ号的好感度，需要这样写：  
```sql
SELECT QQ号,好感度 FROM personal 
WHERE QQ号=1122334455;
```

结果为：
|    QQ号    | 好感度 |
| :--------: | :----: |
| 1122334455 | 114514 |

另外，修改数据的存储方式需要重写**所有**的代码，这显然极度费时费力，并不是一种高效的选择。但对于我来说，这是一个绝好的学习机会，也会让我在计算机这条路上越走越远。毕竟，技多不压身嘛φ(>ω<*) 

大重构需要极长的一段时间，毕竟几千行代码的工作量不是一个人短时间可以应付过来的。开发者团队？不存在的，从始至终，一直只有我一个人而已。

## 2.冒险模式
>我要带上最好的剑，翻过最高的山

数据显示：人们日渐增长的好奇心已经不再满足互相争斗了，他们都在向往着探索那一片未知的、本该属于他们的世界。

### 关于世界 
因为全面核战争的污染与瘟疫的肆虐，庇护所外的世界已经满是核辐射与各种污染物。目前，根据污染程度的不同，外界大致可分为**轻污染区**、**重污染区**和**死境**。

- 轻污染区一般比较安全，怪物较弱，有时甚至不会遇到怪物。在这里，普通的装备就足以应付大多数情况。

- 重污染区十分恐怖，怪物影影绰绰，潜伏在暗处伺机而动。只有强大的勇士勇于前往重污染区探险。不过，重污染区的奖励也相当丰厚。

- **至今没有一个人从死境生还归来。**
### 关于怪物
在强大的射线与天启病毒的双重影响下，动植物的基因发生了可怕的变异。这些变异的生物在一百五十年的时间里被新的自然环境不断筛选，一步步演化成了今天的恐怖模样。

庇护所内的生物检测仪已经检测到部分怪物的信息，并将它们录入数据库。但由于探索工作还没有开始，数据库内的数据尚且残缺不全，同时可能存在部分错误。  
|  怪物名称  | 类别  | 特性  | 危险等级 |
| :--------: | :---: | :---: | :------: |
|   瘟疫鼠   | 动物  | 集群  |  低/中   |
|    沙虫    | 动物  | 隐匿  |    高    |
|   酸液藤   | 植物  | 穿刺  |    中    |
|   辐射蜥   | 动物  | 暴怒  |    高    |
| 流浪无人机 | 机械  |  无   |    低    |
|  失控单元  | 机械  | 集群  |  中/高   |
|  失控卫士  | 机械  | 坚韧  |    中    |
|   食人花   | 植物  |  无   |    低    |

### 关于装备

赛博空间里的装备可没法带到现实里去，所以冒险模式的装备不能继承pvp模式。

冒险模式的装备是独立的，但装备的功能和pvp模式类似。武器与防具各司其职，增加自身的属性。

但是，和pvp不同，冒险模式中装备并不是一切。“**冒险等级**”也会在冒险模式中发挥一定作用。

另外，装备的合成可能也会考虑实装
### 关于冒险等级
冒险等级目前被设计为用来限制玩家的一个设定，一部分装备和科技需要达到足够的冒险等级才可以解锁。另外，每个人的基础数值可能会随着冒险等级成长。

既然有了冒险等级，那么经验值之类的那些rpg游戏里的老朋友，就不用说了吧？

另外，冒险模式中的各项数值和pvp模式的数值是相互独立的，两者之间**没有关系**。
### 关于科技
冒险模式中，可能会引入科技系统。目前，科技系统被设想为一种类似于符文的**百分比加成**或者对敌人的**百分比减益**，或者改变自身攻击和防御的**机制**

科技也许需要一定的冒险等级来解锁，可能会做成科技树的形式，选择一种科技造物携带在身上进行冒险。
### 关于战利品
怪物死亡、或者冒险中抽到奖励事件时会获得战利品。战利品可能是pt点，也可能是稀有的掉落物。这些战利品可以进行合成，打造强力的装备或者做成珍贵的礼物。
## 3.新的礼物系统
>静女其娈，贻我彤管

既然冒险系统即将实装，礼物系统也有可能更新。新的礼物系统是在旧的礼物系统之上的扩展，可能并没有本质的变化。

礼物系统更新之后，礼物不仅可以从商城中购买，也可以通过冒险模式的战利品合成。冒险模式将会成为一个核心功能，拥有举足轻重的地位。
## 4.分离芯片
>给岁月以文明，而非给文明以岁月

亚璃子的背景世界观是非常特别的。在一个人类衰落的未来废土世界，什么魔幻的事都有可能发生。这些事件如果有幸被记录下来，就会成为**分离芯片**。

分离芯片可供阅读，以协助各位更好地了解世界观。
***
亚璃子作为一个开源项目，需要不断的维护与更新。我会一直保护亚璃子继续存在下去。

但是，我的精力是有限的。以一人之力维护一个越来越大、越来越复杂的项目，自己一个人修复bug，现在还可以应付，但是未来简直就是地狱一般的繁重工作

所以，也许我需要招募一个超管来一起管理，一起维护，一起更新？看来真的有必要了……